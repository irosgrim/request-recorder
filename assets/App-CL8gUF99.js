import{r as n,i as u,a as j,s as q,j as e}from"./index-ChBYf1T1.js";const w=()=>{const[t,m]=n.useState(u.getRequestRecorder().mode),[r,a]=n.useState(0);n.useEffect(()=>{a(u.getRequestRecorder().getRequests().size)},[t]);const d=c=>{u.getRequestRecorder().mode=c,localStorage.setItem("recorder-mode",c),m(c)},p=()=>{j.saveToStorage(),a(u.getRequestRecorder().getRequests().size)},s=()=>{u.getRequestRecorder().getRequests().clear(),q.clear(),a(0),d("real")},o=()=>{j.exportToFile()},l=async c=>{await j.importFromFile(c),a(u.getRequestRecorder().getRequests().size)},h=()=>{const c=j.getRecordingsByEndpoint();return Object.keys(c)};return{mode:t,recordingCount:u.getRequestRecorder().getRequests().size,isRecording:t==="record",isReal:t==="real",isFake:t==="fake",setMode:d,save:p,clear:s,exportRecordings:o,importRecordings:l,getEndpoints:h}},C=()=>{const{mode:t,recordingCount:m,isRecording:r,isFake:a,setMode:d,save:p,clear:s,exportRecordings:o,importRecordings:l,getEndpoints:h}=w(),[c,N]=n.useState(!1),[b,x]=n.useState(!1),[k,v]=n.useState(!0);n.useEffect(()=>{v(!0);const i=localStorage.getItem("recorderIsMinimized");x(i==="true"),v(!1)},[]);const f=i=>{x(i),localStorage.setItem("recorderIsMinimized",String(i))},S=async i=>{var R;const g=(R=i.target.files)==null?void 0:R[0];g&&(await l(g),i.target.value="")};return b?e.jsx("div",{className:"recorder-devtools-minimized",children:e.jsxs("button",{onClick:()=>f(!1),children:["::",t,"::"]})}):k?e.jsx(e.Fragment,{}):e.jsxs("div",{className:"recorder-devtools",children:[e.jsxs("div",{className:"recorder-devtools-header",children:[e.jsx("h3",{className:"recorder-devtools-title",children:"API Recorder"}),e.jsx("button",{onClick:()=>f(!0),className:"recorder-devtools-minimize",children:"_"})]}),e.jsxs("div",{className:"recorder-devtools-content",children:[e.jsxs("div",{className:"recorder-devtools-row",children:[e.jsx("span",{className:"recorder-devtools-label",children:"Mode:"}),e.jsx("span",{className:`recorder-devtools-mode ${t}`,children:t})]}),e.jsxs("div",{className:"recorder-devtools-row",children:[e.jsx("span",{className:"recorder-devtools-label",children:"Recorded requests:"}),e.jsx("span",{className:"recorder-devtools-count",children:m})]}),e.jsxs("div",{className:"recorder-devtools-button-group three-columns",children:[e.jsx("button",{onClick:()=>d("record"),className:`recorder-devtools-button ${r?"active-record":"default"}`,children:"Record requests"}),e.jsx("button",{onClick:()=>d("fake"),className:`recorder-devtools-button ${a?"active-fake":"default"}`,children:"Fake"}),e.jsx("button",{onClick:()=>d("real"),className:`recorder-devtools-button ${t==="real"?"active-real":"default"}`,children:"Real"})]}),e.jsxs("div",{className:"recorder-devtools-button-group two-columns",children:[e.jsx("button",{onClick:p,className:"recorder-devtools-button default",children:"💾 Save"}),e.jsx("button",{onClick:s,className:"recorder-devtools-button default",children:"🗑️ Clear"})]}),e.jsxs("div",{className:"recorder-devtools-button-group two-columns",children:[e.jsx("button",{onClick:o,className:"recorder-devtools-button default",children:"📤 Export"}),e.jsxs("label",{className:"recorder-devtools-file-label",children:["📥 Import",e.jsx("input",{type:"file",accept:".json",onChange:S,className:"recorder-devtools-file-input"})]})]}),e.jsxs("button",{onClick:()=>N(!c),className:"recorder-devtools-button default full-width",children:[c?"Hide":"Show"," recorded requests (",h().length,")"]}),c&&e.jsx("ul",{className:"recorder-devtools-endpoints",children:h().map((i,g)=>e.jsx("li",{className:"recorder-devtools-endpoint",children:i},g))})]})]})},E="https://pokeapi.co/api/v2/",I=()=>{const[t,m]=n.useState([]),[r,a]=n.useState(null),d=async s=>{const l=await(await fetch(s)).json();return l.sprites?l.sprites.front_default??Object.values(l.sprites)[0]??null:null},p=s=>{fetch(s).then(o=>o.json()).then(async o=>{if(o.varieties.length>0){const l=await d(o.varieties[0].pokemon.url);o.picture=l}a(o)}).catch(()=>a(null))};return n.useEffect(()=>{fetch(E+"pokemon-species").then(s=>s.json()).then(s=>m(s.results??[]))},[]),e.jsxs("div",{className:"poke-frame",children:[e.jsx("ul",{className:"poke-list",children:t.map(s=>e.jsx("li",{children:e.jsx("button",{onClick:()=>p(s.url),children:s.name})},s.name))}),r&&e.jsxs("div",{className:"poke-details",children:[e.jsxs("p",{children:["Name: ",r.name]}),e.jsxs("p",{children:["Happiness: ",r.base_happiness]}),e.jsxs("p",{children:["Capture rate: ",r.capture_rate]}),e.jsxs("p",{children:["Growth rate: ",r.growth_rate.name]}),r.picture&&e.jsx("img",{src:r.picture,alt:r.name})]})]})};function F(){return e.jsxs(e.Fragment,{children:[e.jsx("h1",{children:"Pokemon species::"}),e.jsx(I,{}),e.jsx(C,{})]})}export{F as default};
